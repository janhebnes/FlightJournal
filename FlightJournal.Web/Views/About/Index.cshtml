@using System.ServiceModel.Channels
@using FlightJournal.Web.Extensions
@{
    ViewBag.Count = "0";
    using (var db = new FlightJournal.Web.Models.FlightContext())
    {
        ViewBag.Count = db.Flights.Count().ToString();
    }
}
<div class="jumbotron">
    @if (Request.LanguageCode() == "da")
    {
        <p>
            <strong>Startlist.club</strong> er et <a href="https://github.com/janhebnes/startlist.club">open source</a> projekt skabt for at håndtere flyveklubbers behov omkring startlister og logbøger for piloter og fly.
        </p>
    }
    else // en
    {
        <p>
            <strong>Startlist.club</strong> is an <a href="https://github.com/janhebnes/startlist.club">open source</a> project created for handling flightclub startlists and logbooks for pilots and plane.
        </p>
    }
</div>
@if (Request.IsAuthenticated)
{
    <div class="row">
        <div class="col-md-6">
            @Html.Action("ManagePilotBindingPartial", "Manage")
        </div>
        <div class="col-md-6">
            @Html.Action("ClubPresentation", "Club")
        </div>
    </div>
}
<hr />
<div class="row">

    @if (Request.LanguageCode() == "da")
    {
        <div class="col-md-6">
            <h2>Projekt fælles startliste</h2>
            <p>
                Kildekoden er open source og du er velkommen til at kopiere, tilpasse og bruge koden.
                Systemet er opbygget på baggrund af erfaringerne i <a href="http://www.flyveklubben.dk">Øst-Sjællands flyveklub</a>.<br />
            </p>
            <p>
                Formålet med dette projekt er, at gøre startlisten let tilgængelig, dynamisk og nem at håndtere. I mange (svæve-) flyveklubber bruger man i dag pen og papir til startlisten og der er udviklet mange forskellige systemer i klubberne. Med denne Startliste er der lavet en samlet platform til klubberne i Danmark og muligvis Norden. Dette er et forsøg på, at få alle kræfterne samlet til at lave et fælles system, som alle kan bidrage til, have gavn og glæde af.
            </p>
            <h2>Kom i gang med din klub</h2>
            <p>
                Ønsker du at gøre brug af platformen bedes et medlem fra bestyrelsen kontakte Jan Hebnes på <a href="mailto:jan.hebnes@gmail.com">jan.hebnes@gmail.com</a>.<br />
                Har du brug for hjælpe eller har spørgsmål er du meget velkommen til at benytte facebook siden <a href="https://www.facebook.com/startlist.club">https://www.facebook.com/startlist.club</a>.
            </p>
            <hr />
            <h3>
                Hvad kan systemet
            </h3>
            <p>
                Det er nu muligt at registrere dine flyvninger, se rettelseshistorik, se statistik på dag/måned/år, lave udtræk til Excel (CSV) og logge på via Facebook og Google. <br />
                Der er mulighed for at filtrere oplysninger på baggrund af klub og fastholde klubpiloter samt flyvepladser i alle visninger og statistikker.
            </p>
            <p>
                Der er tre niveauer af rettigheder i systemet, en klub Pilot og en Editor og en Manager.<br />
                <b>En klub pilot </b> kan registrere flyvninger samt redigere i dem op til 48 efter den registerede dato. Der er rettelseshistorik på alle ændringer.<br />
                <b>Editor</b> kan frit redigere flyvninger efter de 48 timer og kan registrere nye fly og landingssteder, samt slette flvyninger.<br />
                <b>Manager</b> kan ændre i klubbens registrerede piloter samt det som editor har adgang til.
            </p>
            <p>
                <strong>Login systemet</strong> er uafhængigt af pilotlisterne så hvis du vil oprettes som pilot skal du kontakte din klubs redaktør.
            </p>
            <p>
                <strong>Rettelses historikken</strong> fungerer efter de samme principper som en Wiki hvor man til enhver tid kan se hvem, der har rettet hvilke flyvninger. Dette kan gøres op til 48 timer efter flyvningen fandt sted.
            </p>
            <hr />
            <h3>
                Tilpas systemet (til .Net udviklere)
            </h3>
            <p>
                Løsningen er baseret på ASP.Net MVC og Entity Framework med en Code First tilgang til databasen. Det er muligt at bidrage til kildekoden via projektet på Github.
                Forudsætningen for at kode bidraget tages med i kernen er at koden har generel værdi for alle klubber og ikke udgør en specialisering, der vil gøre systemet mere besværligt for andre at bruge.
            </p>
            <p>
                Grundtanken er at man kan klare sig rigtig langt ved at kassereren henter flyvestatistikken en gang om måneden og medlemmerne hjælper med de rette kommentarer til flyvningerne undervejs.
            <p>
                <br />
                <a class="btn btn-primary btn-lg" role="button" href="https://github.com/janhebnes/startlist.club">
                    <span class="glyphicon glyphicon-cloud-upload"></span> Projektsiden på Github.com
                </a>
                <br />
                <em>https://github.com/janhebnes/startlist.club</em>
            </p>
        </div>
    }
    else // Default en
    {
        <div class="col-md-6">
            <h2>A unified startlist across flightclubs</h2>
            <p>The source code is open source. In most soaring- and flightclubs the startlist is managed in various ways and often using pen and paper.</p>
            <p>Startlist.club is a common digital platform for soaring clubs, primarily aimed at supporting clubs in northern Europe (Scandinavia) but potentially global.</p>
            <p>This is an attempt to combine our efforts and create a system, which we all can contribute to, use and benefit from.</p>
            <h2>How to get started</h2>
            <p>For more information on how to get started on using the platform please contact Jan Hebnes at <a href="mailto:jan.hebnes@gmail.com">jan.hebnes@gmail.com</a>.</p>
            <p>You can also visit the facebook page <a href="https://www.facebook.com/startlist.club">https://www.facebook.com/startlist.club</a>.</p>
            <h3>What does the system do?</h3>
            <p>
                It is now possible to register your flights, see corrections, see statistics on dd/mm/yy, export to Excel (CSV) and log in to the system via Facebook and Google.<br />
                You can filter your search on club and maintain the same pilots and airstrips in all readings and statistics.
            </p>
            <p>
                The system has three levels of users; a Club Pilot, an Editor and a Manager.<br />
                <strong>The Club Pilot</strong> can register flights and edit them for 48 hours. All changes are logged in the correction history.<br />
                <strong>The Editor</strong> can edit all flights after 48 hours, register new aircrafts and runways, and delete flights.<br />
                <strong>The Manager</strong> has the same rights as the Editor and in addition, the Manager can edit registered club pilots profiles.<br />
            </p>
            <p>
                <strong>The Login System</strong> is independent of the pilot-lists. If you want to register please contact your club Editor.
            </p>
            <p>
                <strong>The Revision History</strong> works like a Wiki and anyone can see who edited flights at any time. This is possible until 48 hours after editing.
            </p>
            <hr />
            <h3>Adjust the system (for .Net developers)</h3>
            <p>The solution is based on ASP.Net MVC and Entity Framework with a Code First approach to the database. It is possible to contribute to the source code through Github. The contribution is included in the source code provided that it is of general value to all clubs, and does not comprise a specialisation which introduces inconveniences to other users.</p>
            <p>The basic idea is that the cashier of the club gets the flight-statistics once a month and club members helps editing comments for the flights continually.</p>
            <p>
                <br />
                <a class="btn btn-primary btn-lg" role="button" href="https://github.com/janhebnes/startlist.club">
                    <span class="fa fa-github fa-3"></span> startlist.club on Github.com
                </a>
                <em>https://github.com/janhebnes/startlist.club</em>
            </p>
        </div>
    }

    <div class="col-md-4">
        <p>
            <a class="btn btn-primary btn-lg" role="button" href="https://github.com/janhebnes/startlist.club">
                <span class="fa fa-github fa-3"></span> startlist.club on Github.com
            </a><em>https://github.com/janhebnes/startlist.club</em>
        </p>

        @if (!Request.IsAuthenticated)
        {
            <div class="alert alert-info">
                <h4>@_("Choose Flightclub")</h4>
                @Html.Action("ClubPresentation", "Club")
            </div>
        }

        @if (User.IsAdministrator())
        {
            <div class="alert alert-info">
                <h4>IDEAS 2015 (post-release)</h4>
                #TODO: Pilot redigering udvides så man kan vælge kode og om der skal sendes bruger oplysninger til personen (verify email slår automatisk til).<br />
                #TODO: FlightControl > PopulateViewBag > skal tilføje piloter når de er tilknyttet også selv om de er filtreret bort af klub valg.<br />
                #TODO: Trimme redigering af flyvningerne så pilot på tværs af klubberne<br />
                #TODO: Introducere at man kan navigere i startlisten via kalender dage udover tidligere.<br />
                #TODO: Fly administration mangler review<br />
                #TODO: Validere proces for administrator med administration af managere<br />
                #TODO: Validere proces for editor med administration af landingspladser og fly<br />
                #TODO: Introducere redigering af ExitDate på fly så de forsvinder fra listen, men ikke fra systemet<br />
                #TODO: Introducere ExitDate på medlemmer så de forsvinder fra listen, men ikke fra systemet<br />
                #TODO: Historik over rettelser skal starte med filter kun relateret til egne flyvninger eller rettelser og så udvides hvis man vil se mere.<br />
            </div>
        }

        @switch (Request.Url.Host)
        {
            case "startlist.club":

                <div id="fb-root"></div>
                <script>
                    (function (d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s);
                        js.id = id;
                        js.src = "//connect.facebook.net/da_DK/sdk.js#xfbml=1&appId=1505071653061127&version=v2.3";
                        fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));
                </script>
                <div class="fb-page" data-href="https://www.facebook.com/startlist.club" data-hide-cover="false" data-show-facepile="true" data-show-posts="true"></div>
                break;
        }
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <h3>Credits - use of 3rd party components</h3>
        <table style="width: 100%; border: 1px solid gray;">
            <thead>
            <tr>
                <th>Component</th>
                <th>Copyright</th>
                <th>License</th>
                <th>Link</th>
            </tr>
            </thead>
            <tbody>
                <tr>
                    <td>skyHop.FlightAnalysis</td>
                    <td>Copyright Corstian Boerman</td>
                    <td><a href="https://github.com/skyhop/FlightAnalysis/blob/master/LICENSE">GNU GPL-3.0</a></td>
                    <td><a href="https://github.com/skyhop/FlightAnalysis">https://github.com/skyhop/FlightAnalysis</a></td>
                </tr>
            </tbody>
        </table>
        <p>... and several other open-source public-domain packages. Please see the source if you need details.</p>
    </div>
</div>
